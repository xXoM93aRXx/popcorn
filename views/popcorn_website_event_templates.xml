<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Membership Required Page Template -->
        <template id="membership_required_page" name="Membership Required">
            <t t-call="website.layout">
                <div class="container mt-4">
                    <div class="row justify-content-center">
                        <div class="col-md-8 text-center">
                            <div class="alert alert-warning" role="alert">
                                <h2 class="alert-heading">
                                    <i class="fa fa-exclamation-triangle"></i>
                                    Membership Required
                                </h2>
                                <p class="mb-3">
                                    <t t-if="request.session.get('error_message')">
                                        <t t-esc="request.session.get('error_message')"/>
                                    </t>
                                    <t t-else="">
                                        Check out the membership plans for big savings and awesome benefits!
                                    </t>
                                </p>
                                <hr/>
                                <p class="mb-0">
                                    <a href="/web/login" class="btn btn-primary me-2">
                                        <i class="fa fa-sign-in"></i> Log In
                                    </a>
                                    <a href="/shop" class="btn btn-outline-primary">
                                        <i class="fa fa-shopping-cart"></i> View Membership Plans
                                    </a>
                                </p>
                            </div>
                            
                            <div class="card mt-4">
                                <div class="card-body">
                                    <h5 class="card-title">Why Membership?</h5>
                                    <p class="card-text">
                                        Our events are exclusive to Popcorn Club members. 
                                        Join us to access regular offline and online events, 
                                        special club sessions, and more!
                                    </p>
                                    <div class="row mt-3">
                                        <div class="col-md-4">
                                            <div class="text-center">
                                                <i class="fa fa-calendar fa-2x text-primary mb-2"></i>
                                                <h6>Regular Events</h6>
                                                <small>Access to offline and online club sessions</small>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-center">
                                                <i class="fa fa-star fa-2x text-warning mb-2"></i>
                                                <h6>Special Club</h6>
                                                <small>Exclusive special club events</small>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-center">
                                                <i class="fa fa-users fa-2x text-success mb-2"></i>
                                                <h6>Community</h6>
                                                <small>Join our exclusive community</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        <!-- Success Message Template -->
        <template id="registration_success_message" name="Registration Success Message">
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="fa fa-check-circle"></i>
                <t t-if="request.session.get('success_message')">
                    <t t-esc="request.session.get('success_message')"/>
                </t>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </template>

        <!-- Error Message Template -->
        <template id="registration_error_message" name="Registration Error Message">
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fa fa-exclamation-circle"></i>
                <t t-if="request.session.get('error_message')">
                    <t t-esc="request.session.get('error_message')"/>
                </t>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </template>

        <!-- Event Registration Success Page -->
        <template id="event_registration_success_page" name="Event Registration Success">
            <t t-call="website.layout">
                <div class="container mt-4">
                    <div class="row justify-content-center">
                        <div class="col-md-8">
                            <div t-if="is_waitlist" class="alert alert-warning" role="alert">
                                <h2 class="alert-heading">
                                    <i class="fa fa-clock-o"></i>
                                    Added to Waitlist
                                </h2>
                                <p class="mb-3">
                                    The event is currently full, but you've been added to the waitlist!
                                </p>
                                <hr/>
                                <p class="mb-0">
                                    <strong>Your position:</strong> #<t t-esc="waitlist_position"/> on the waitlist<br/>
                                    <strong>Event:</strong> <t t-esc="event.name"/><br/>
                                    <strong>Date:</strong> <t t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'LLL'}"/>
                                </p>
                            </div>
                            
                            <div t-else="" class="alert alert-success" role="alert">
                                <h2 class="alert-heading">
                                    <i class="fa fa-check-circle"></i>
                                    Registration Successful!
                                </h2>
                                <p class="mb-3">
                                    You have successfully registered for the event.
                                </p>
                                <hr/>
                                <p class="mb-0">
                                    <strong>Event:</strong> <t t-esc="event.name"/><br/>
                                    <strong>Date:</strong> <t t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'LLL'}"/><br/>
                                    <t t-if="consumption_text">
                                        <strong>Membership Usage:</strong> <t t-esc="consumption_text"/>
                                    </t>
                                </p>
                            </div>
                            
                            <div class="card mt-4">
                                <div class="card-body text-center">
                                    <h5 class="card-title">What's Next?</h5>
                                    <p class="card-text">
                                        <t t-if="is_waitlist">
                                            We'll notify you if a spot becomes available. In the meantime, you can check other events or manage your memberships.
                                        </t>
                                        <t t-else="">
                                            You'll receive a confirmation email shortly. You can manage your registrations in your portal.
                                        </t>
                                    </p>
                                    <div class="mt-3">
                                        <a href="/my/clubs" class="btn btn-primary me-2">
                                            <i class="fa fa-calendar"></i> My Clubs
                                        </a>
                                        <a href="/events" class="btn btn-outline-primary">
                                            <i class="fa fa-plus"></i> Browse More Events
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        <!-- Single Event Card Template -->
        <template id="popcorn_single_event_card" name="Popcorn Single Event Card">
            <div t-attf-class="#{opt_event_size}">
                <!-- Check if event is in freeze period for current user -->
                <t t-set="is_frozen" t-value="is_frozen"/>
                <t t-set="frozen_membership" t-value="frozen_membership"/>
                
                
                <a t-cache="event if not editable and event.website_published else None" 
                   t-attf-href="/event/#{ slug(event) }/#{(not event.menu_id) and (event.event_registrations_open or event.event_registrations_sold_out) and 'register'}" 
                   class="popcorn-event-card" 
                   t-att-data-publish="event.website_published and 'on' or 'off'" 
                   t-att-data-event-id="event.id"
                   t-att-class="'popcorn-event-card' + (not event.event_registrations_open and not event.event_registrations_sold_out and ' disabled' or '') + (is_frozen and ' frozen' or '')">
                    <article t-attf-class="popcorn-event-article #{not event.event_registrations_open and not event.event_registrations_sold_out and 'disabled' or ''} #{is_frozen and 'frozen' or ''} #{event.event_registrations_sold_out and 'sold-out' or ''}" 
                             itemscope="itemscope" 
                             itemtype="http://schema.org/Event" 
                             t-att-style="'background-color: ' + (event.background_color or '#ffffff') + '; color: ' + (event.text_color or '#000000') + ';'">
                        <div class="h-100 d-flex flex-wrap flex-column">
                            <!-- Header with Image -->
                            <header class="popcorn-event-header col-12">
                                <div class="popcorn-event-image-container">
                                    <!-- Banner Image -->
                                    <div t-if="event.badge_image" class="popcorn-event-image">
                                        <img t-att-src="'/web/image/event.event/' + str(event.id) + '/badge_image'" class="w-100 h-100" style="object-fit: cover;" t-att-alt="event.name"/>
                                    </div>
                                    <div t-else="" class="popcorn-event-image" style="background-image: url('/website_event/static/src/img/event_cover_4.jpg');"></div>
                                    
                                    <meta itemprop="startDate" t-att-content="event.date_begin.isoformat()"/>
                                    
                                    <!-- Date Overlay - Bottom Left -->
                                    <div t-attf-class="popcorn-event-date-overlay o_wevent_event_date o_not_editable bottom-left">
                                        <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'LLL'}" class="popcorn-event-month"/>
                                        <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'dd'}" class="popcorn-event-day oe_hide_on_date_edit"/>
                                        <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'EEE'}" class="popcorn-event-weekday"/>
                                    </div>
                                    
                                    <!-- Status overlays -->
                                    <div t-if="not event.event_registrations_open and not event.event_registrations_sold_out" class="popcorn-event-status-overlay">
                                        <t t-if="not event.event_registrations_started">
                                            Not Open
                                        </t>
                                        <t t-else="">
                                            Closed
                                        </t>
                                    </div>
                                    
                                    
                                    <!-- Freeze status overlay -->
                                    <div t-if="is_frozen" class="popcorn-event-freeze-overlay">
                                        <div class="popcorn-freeze-status">
                                            <i class="fa fa-pause"></i>
                                            <span>Membership Frozen</span>
                                            <small t-if="frozen_membership">
                                                <br/>Until <t t-esc="frozen_membership.freeze_end"/>
                                            </small>
                                        </div>
                                    </div>
                                    
                                    <small t-if="not event.website_published" class="o_wevent_unpublished position-absolute bottom-0 px-3 py-2 w-100 text-bg-danger">
                                        <i class="fa fa-ban me-2"/>Unpublished
                                    </small>
                                </div>
                            </header>
                            
                            <!-- Body -->
                            <main class="popcorn-event-body col-12 py-3">
                                <div class="popcorn-event-content-wrapper">
                                    <!-- Left Column: Event Details -->
                                    <div class="popcorn-event-details">
                                        <div class="popcorn-event-tags">
                                            <t t-foreach="event.tag_ids.filtered(lambda tag: tag.category_id.website_id == website or not tag.category_id.website_id)" t-as="tag">
                                                <span t-if="tag.color" t-attf-class="popcorn-event-tag badge #{'o_color_%s' % tag.color if tag.color else 'text-bg-light'}">
                                                    <t t-out="tag.name"/>
                                                </span>
                                            </t>
                                        </div>
                                  
                                        <!-- Event Date and Time -->
                                        <div class="popcorn-event-datetime mb-2">
                                            <i class="fa fa-clock-o me-2" style="color: #6c757d;"></i>
                                            <small class="text-muted">
                                                <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'EEE M/d'}"/>
                                                <span> </span>
                                                <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'HH:mm'}"/>
                                                <span t-if="event.date_begin != event.date_end">-</span>
                                                <span t-if="event.date_begin != event.date_end" t-out="event.date_end" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'HH:mm'}"/>
                                            </small>
                                        </div>
                                        <!-- Subtitle -->
                                        <small class="popcorn-event-subtitle" itemprop="description" t-field="event.subtitle"/>
                                        
                                        <!-- Event Details Row: Seats, Location, and Registered Status -->
                                        <div class="popcorn-event-details-row mt-2">
                                            <!-- Left Side: Seats and Location -->
                                            <div class="popcorn-event-details-left">
                                                <!-- Seat Availability -->
                                                <div class="popcorn-event-seats">
                                                    <i class="fa fa-users me-1" style="color: #6c757d;"></i>
                                                    <small class="text-muted">
                                                        <t t-if="event.seats_limited">
                                                            <t t-esc="event.seats_taken"/> / <t t-esc="event.seats_max"/> seats
                                                            <t t-if="event.seats_available > 0">
                                                                (<t t-esc="event.seats_available"/> available)
                                                            </t>
                                                            <t t-elif="event.seats_available == 0 and event.waitlist_count > 0">
                                                                (Waitlist: <t t-esc="event.waitlist_count"/>)
                                                            </t>
                                                            <t t-else="">
                                                                (Full)
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            Unlimited seats
                                                        </t>
                                                    </small>
                                                </div>
                                                
                                                <!-- Location -->
                                                <div t-if="not event.is_online_event or event.event_city" class="popcorn-event-location">
                                                    <i class="fa fa-map-marker popcorn-event-location-icon" title="Location"/>
                                                    <small t-if="event.event_city" class="popcorn-event-location-text o_not_editable" itemprop="location" t-out="event.event_city"/>
                                                    <small t-else="" class="popcorn-event-location-text o_not_editable" itemprop="location">Online event</small>
                                                </div>
                                                
                                                <!-- Event Price -->
                                                <t t-if="event.event_price and event.event_price > 0">
                                                    <div class="popcorn-event-price mt-2">
                                                        <i class="fa fa-money me-2" style="color: #28a745;"></i>
                                                        <span class="text-success fw-bold">
                                                            <span t-esc="event.currency_id.symbol"/><span t-esc="event.event_price"/>
                                                        </span>
                                                    </div>
                                                </t>
                                            </div>
                                            
                                            <!-- Right Side: Registration Status -->
                                            <div class="popcorn-event-details-right">
                                                <!-- Registered Status -->
                                                <div t-if="event.is_participating and event.user_waitlist_position == 0" class="popcorn-registered-status">
                                                    <div class="popcorn-registered-content">
                                                        <i class="fa fa-check-circle"></i>
                                                        <span>Registered</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- Waitlist Status -->
                                                <div t-if="event.user_waitlist_position > 0" class="popcorn-waitlist-status">
                                                    <div class="popcorn-waitlist-content">
                                                        <i class="fa fa-clock-o"></i>
                                                        <span>#<t t-esc="event.user_waitlist_position"/></span>
                                                        <small>Waitlist</small>
                                                    </div>
                                                </div>
                                                
                                                <!-- Join Waitlist Status -->
                                                <div t-if="event.event_registrations_sold_out and not event.is_participating" class="popcorn-join-waitlist-status">
                                                    <div class="popcorn-join-waitlist-content" style="background-color: #ff8c00; color: white; padding: 4px 8px; border-radius: 4px; display: inline-flex; align-items: center; gap: 4px;">
                                                        <i class="fa fa-clock-o"></i>
                                                        <span>Join Waitlist</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </main>
                        </div>
                    </article>
                </a>
            </div>
        </template>
    </data>
    <template id="popcorn_website_event_events_list" inherit_id="website_event.events_list" name="Popcorn Website Event Events List">
        <xpath expr="." position="replace">
            <t name="Popcorn Events list" t-name="popcorn.website_event_events_list">
                <!-- Options -->
                <t t-set="opt_index_sidebar" t-value="is_view_active('website_event.opt_index_sidebar')"/>
                <t t-set="opt_events_event_location" t-value="is_view_active('website_event.event_location')"/>
                <t t-if="opt_events_list_columns" t-set="opt_event_size" t-value="opt_index_sidebar and 'col-md-6' or 'col-md-6 col-lg-4 col-xl-3'"/>
                <t t-else="" t-set="opt_event_size" t-value="opt_index_sidebar and 'col-12' or 'col-xl-12'"/>
                
                <!-- No events -->
                <div t-if="not event_ids" class="col-12 text-center">
                    <div t-call="website_event.event_empty_events_svg" class="my-4"/>
                    <h3>No events scheduled yet</h3>
                    <p t-if="searches['search']">We couldn't find any event matching your search for: <strong t-out="searches['search']"/>.</p>
                    <p t-elif="searches['tags']">No event matching your search criteria could be found.</p>
                    <p t-else="">We couldn't find any event scheduled at this moment.</p>
                    <div class="o_not_editable my-3" groups="event.group_event_user">
                        <a class="o_wevent_cta btn" target="_blank" href="/odoo/action-event.action_event_view?view_type=form">
                            <span class="fa fa-plus me-1"/> Create an Event
                        </a>
                    </div>
                </div>
                
                <!-- Fuzzy search -->
                <div t-if="event_ids and original_search" class="col-12 alert alert-warning mt8">
                    No results found for '<span t-out="original_search"/>'. Showing results for '<span t-out="searches['search']"/>'.
                </div>
                
                <!-- Events Container -->
                <div class="popcorn-events-container">
                    <div class="popcorn-events-list row">
                        <!-- List -->
                        <div t-foreach="event_ids" t-as="event" t-attf-class=" #{opt_event_size}">
                    <!-- Check if event is in freeze period for current user -->
                    <t t-set="is_frozen" t-value="False"/>
                    <t t-set="frozen_membership" t-value="None"/>
                    <t t-if="request.env.user.id != request.env.ref('base.public_user').id">
                        <t t-set="is_frozen" t-value="event.is_in_freeze_period(request.env.user.partner_id)[0]"/>
                        <t t-if="is_frozen" t-set="frozen_membership" t-value="event.is_in_freeze_period(request.env.user.partner_id)[1]"/>
                    </t>
                    
                    
                    <a t-cache="event if not editable and event.website_published else None" 
                       t-attf-href="/event/#{ slug(event) }/#{(not event.menu_id) and (event.event_registrations_open or event.event_registrations_sold_out) and 'register'}" 
                       class="popcorn-event-card" 
                       t-att-data-publish="event.website_published and 'on' or 'off'" 
                       t-att-data-event-id="event.id"
                       t-att-class="'popcorn-event-card' + (not event.event_registrations_open and not event.event_registrations_sold_out and ' disabled' or '') + (is_frozen and ' frozen' or '')">
                        <article t-attf-class="popcorn-event-article #{not event.event_registrations_open and not event.event_registrations_sold_out and 'disabled' or ''} #{is_frozen and 'frozen' or ''} #{event.event_registrations_sold_out and 'sold-out' or ''}" 
                                 itemscope="itemscope" 
                                 itemtype="http://schema.org/Event" 
                                 t-att-style="'background-color: ' + (event.background_color or '#ffffff') + '; color: ' + (event.text_color or '#000000') + ';'">
                            <div t-attf-class="h-100 #{opt_events_list_columns and 'd-flex flex-wrap flex-column' or 'row mx-0'}">
                                <!-- Header with Image -->
                                <header t-attf-class="popcorn-event-header #{opt_events_list_columns and 'col-12' or 'col-4 col-lg-3'}">
                                    <div class="popcorn-event-image-container">
                                        <!-- Banner Image -->
                                        <div t-if="event.badge_image" class="popcorn-event-image">
                                            <img t-att-src="'/web/image/event.event/' + str(event.id) + '/badge_image'" class="w-100 h-100" style="object-fit: cover;" t-att-alt="event.name"/>
                                        </div>
                                        <div t-else="" class="popcorn-event-image" style="background-image: url('/website_event/static/src/img/event_cover_4.jpg');"></div>
                                        
                                        <meta itemprop="startDate" t-att-content="event.date_begin.isoformat()"/>
                                        
                                    <!-- Date Overlay - Bottom Left -->
                                    <div t-attf-class="popcorn-event-date-overlay o_wevent_event_date o_not_editable bottom-left">
                                        <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'LLL'}" class="popcorn-event-month"/>
                                        <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'dd'}" class="popcorn-event-day oe_hide_on_date_edit"/>
                                        <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'EEE'}" class="popcorn-event-weekday"/>
                                    </div>
                                        
                                        
                                        <!-- Status overlays -->
                                        <div t-if="not event.event_registrations_open and not event.event_registrations_sold_out" class="popcorn-event-status-overlay">
                                            <t t-if="not event.event_registrations_started">
                                                Not Open
                                            </t>
                                            <t t-else="">
                                                Closed
                                            </t>
                                        </div>
                                        
                                        
                                        <!-- Freeze status overlay -->
                                        <div t-if="is_frozen" class="popcorn-event-freeze-overlay">
                                            <div class="popcorn-freeze-status">
                                                <i class="fa fa-pause"></i>
                                                <span>Membership Frozen</span>
                                                <small t-if="frozen_membership">
                                                    <br/>Until <t t-esc="frozen_membership.freeze_end"/>
                                                </small>
                                            </div>
                                        </div>
                                        
                                        <small t-if="not event.website_published" class="o_wevent_unpublished position-absolute bottom-0 px-3 py-2 w-100 text-bg-danger">
                                            <i class="fa fa-ban me-2"/>Unpublished
                                        </small>
                                    </div>
                                </header>
                                
                                <!-- Body -->
                                <main t-attf-class="popcorn-event-body #{opt_events_list_columns and 'col-12 py-3' or 'col-8 col-lg-9 px-4'} #{not opt_events_list_cards and opt_events_list_columns and 'bg-transparent px-0'} #{not opt_events_list_cards and not opt_events_list_columns and 'bg-transparent py-0'}">
                                    <div class="popcorn-event-content-wrapper">
                                        <!-- Left Column: Event Details -->
                                        <div class="popcorn-event-details">
                                            <div class="popcorn-event-tags">
                                                <t t-foreach="event.tag_ids.filtered(lambda tag: tag.category_id.website_id == website or not tag.category_id.website_id)" t-as="tag">
                                                    <span t-if="tag.color" t-attf-class="popcorn-event-tag badge #{'o_color_%s' % tag.color if tag.color else 'text-bg-light'}">
                                                        <t t-out="tag.name"/>
                                                    </span>
                                                </t>
                                            </div>
                                            <!-- Title -->
                                            <h5 t-attf-class="popcorn-event-title #{(not event.website_published) and 'text-danger'}">
                                            </h5>
                                            <!-- Event Date and Time -->
                                            <div class="popcorn-event-datetime mb-2">
                                                <i class="fa fa-clock-o me-2" style="color: #6c757d;"></i>
                                                <small class="text-muted">
                                                    <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'EEE M/d'}"/>
                                                    <span> </span>
                                                    <span t-out="event.date_begin" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'HH:mm'}"/>
                                                    <span t-if="event.date_begin != event.date_end">-</span>
                                                    <span t-if="event.date_begin != event.date_end" t-out="event.date_end" t-options="{'widget': 'datetime', 'tz_name': event.date_tz, 'format': 'HH:mm'}"/>
                                                </small>
                                            </div>
                                            <!-- Subtitle -->
                                            <small class="popcorn-event-subtitle" itemprop="description" t-field="event.subtitle"/>
                                            
                                        <!-- Event Details Row: Seats, Location, and Registered Status -->
                                        <div class="popcorn-event-details-row mt-2">
                                            <!-- Left Side: Seats and Location -->
                                            <div class="popcorn-event-details-left">
                                                <!-- Seat Availability -->
                                                <div class="popcorn-event-seats">
                                                    <i class="fa fa-users me-1" style="color: #6c757d;"></i>
                                                    <small class="text-muted">
                                                        <t t-if="event.seats_limited">
                                                            <t t-esc="event.seats_taken"/> / <t t-esc="event.seats_max"/> seats
                                                            <t t-if="event.seats_available > 0">
                                                                (<t t-esc="event.seats_available"/> available)
                                                            </t>
                                                            <t t-elif="event.seats_available == 0 and event.waitlist_count > 0">
                                                                (Waitlist: <t t-esc="event.waitlist_count"/>)
                                                            </t>
                                                            <t t-else="">
                                                                (Full)
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            Unlimited seats
                                                        </t>
                                                    </small>
                                                </div>
                                                
                                                <!-- Location -->
                                                <div t-if="not event.is_online_event or event.event_city" class="popcorn-event-location">
                                                    <i class="fa fa-map-marker popcorn-event-location-icon" title="Location"/>
                                                    <small t-if="event.event_city" class="popcorn-event-location-text o_not_editable" itemprop="location" t-out="event.event_city"/>
                                                    <small t-else="" class="popcorn-event-location-text o_not_editable" itemprop="location">Online event</small>
                                                </div>
                                                
                                                <!-- Event Price -->
                                                <t t-if="event.event_price and event.event_price > 0">
                                                    <div class="popcorn-event-price mt-2">
                                                        <i class="fa fa-money me-2" style="color: #28a745;"></i>
                                                        <span class="text-success fw-bold">
                                                            <span t-esc="event.currency_id.symbol"/><span t-esc="event.event_price"/>
                                                        </span>
                                                    </div>
                                                </t>
                                            </div>
                                            
                                            <!-- Right Side: Registration Status -->
                                            <div class="popcorn-event-details-right">
                                                <!-- Registered Status -->
                                                <div t-if="event.is_participating and event.user_waitlist_position == 0" class="popcorn-registered-status">
                                                    <div class="popcorn-registered-content">
                                                        <i class="fa fa-check-circle"></i>
                                                        <span>Registered</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- Waitlist Status -->
                                                <div t-if="event.user_waitlist_position > 0" class="popcorn-waitlist-status">
                                                    <div class="popcorn-waitlist-content">
                                                        <i class="fa fa-clock-o"></i>
                                                        <span>#<t t-esc="event.user_waitlist_position"/></span>
                                                        <small>Waitlist</small>
                                                    </div>
                                                </div>
                                                
                                                <!-- Join Waitlist Status -->
                                                <div t-if="event.event_registrations_sold_out and not event.is_participating and event.user_waitlist_position == 0" class="popcorn-join-waitlist-status">
                                                    <div class="popcorn-join-waitlist-content">
                                                        <i class="fa fa-clock-o"></i>
                                                        <span>Join Waitlist</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                </main>
                            </div>
                        </article>
                    </a>
                        </div>
                    </div>
                </div>
            
            </t>
        </xpath>
    </template>
    
    <!-- Add Day of Week Filter -->
    <template id="popcorn_event_day_filter" inherit_id="website_event.index_topbar" name="Day of Week Filter">
        <!-- Desktop dropdown filter -->
        <xpath expr="//div[hasclass('o_wevent_search')]" position="before">
            <div class="dropdown d-none d-lg-block popcorn-day-filter me-2">
                <a href="#" role="button" class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown" title="Filter by Day of Week">
                    <t t-if="selected_days and len(selected_days) > 0">
                        <t t-if="len(selected_days) == 1">
                            <t t-foreach="day_of_week_options" t-as="day_option">
                                <t t-if="day_option[0] in selected_days" t-out="day_option[1]"/>
                            </t>
                        </t>
                        <t t-else="">
                            <t t-esc="len(selected_days)"/> Days
                        </t>
                    </t>
                    <t t-else="">All Days</t>
                </a>
                <div class="dropdown-menu">
                    <t t-foreach="day_of_week_options" t-as="day_option">
                        <t t-set="is_selected" t-value="day_option[0] in selected_days"/>
                        <t t-set="new_selected_days" t-value="selected_days.copy() if selected_days else []"/>
                        <t t-if="is_selected">
                            <t t-set="new_selected_days" t-value="[d for d in selected_days if d != day_option[0]]"/>
                        </t>
                        <t t-else="">
                            <t t-set="new_selected_days" t-value="selected_days + [day_option[0]]"/>
                        </t>
                        <t t-set="new_day_param" t-value="','.join(new_selected_days) if new_selected_days else ''"/>
                        <div class="dropdown-item d-flex align-items-center justify-content-between">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" t-att-checked="is_selected" t-att-data-day="day_option[0]"/>
                                <label class="form-check-label" t-out="day_option[1]"/>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </xpath>
        
        <!-- Clear Filters Button for Desktop - after search area -->
        <xpath expr="//div[hasclass('o_wevent_search')]" position="after">
            <div t-if="has_active_filters" class="d-none d-lg-block">
                <a href="/events/clear-filters" class="btn btn-outline-danger btn-sm">
                    <i class="fa fa-times"></i> Clear All Filters
                </a>
            </div>
        </xpath>
        
        <!-- Mobile offcanvas filter -->
        <xpath expr="//span[hasclass('o_wevent_offcanvas_country')]" position="after">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target=".o_wevent_offcanvas_day"
                        aria-expanded="false"
                        aria-controls="o_wevent_offcanvas_day">
                        Day of Week
                    </button>
                </h2>
                <div id="o_wevent_offcanvas_day" class="o_wevent_offcanvas_day accordion-collapse collapse" aria-labelledby="offcanvas_day">
                    <div class="accordion-body pt-0">
                        <ul class="list-group list-group-flush popcorn-day-filter">
                            <t t-foreach="day_of_week_options" t-as="day_option">
                                <li class="list-group-item px-0 border-0">
                                    <t t-set="is_selected" t-value="day_option[0] in selected_days"/>
                                    <div class="form-check flex-basis-100">
                                        <input class="form-check-input" type="checkbox" t-att-checked="is_selected" t-att-data-day="day_option[0]"/>
                                        <label class="form-check-label" t-out="day_option[1]"/>
                                    </div>
                                </li>
                            </t>
                        </ul>
                    </div>
                </div>
            </div>
        </xpath>
        
        <!-- Clear Filters Button for Mobile - in offcanvas body -->
        <xpath expr="//div[@class='offcanvas-body p-0']" position="inside">
            <div t-if="has_active_filters" class="d-lg-none mt-3 px-3">
                <a href="/events/clear-filters" class="btn btn-outline-danger btn-sm w-100">
                    <i class="fa fa-times"></i> Clear All Filters
                </a>
            </div>
        </xpath>
    </template>
</odoo>
